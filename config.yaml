proxy:
  listen:
    tcp: "0.0.0.0:8080"
    udp: "0.0.0.0:8081"
  
  # TCP backends (HTTP services)
  backends:
    - address: "backend1:3000"
      weight: 100
      health_check:
        interval: 5s
        timeout: 2s
        path: "/health"
    - address: "backend2:3001"
      weight: 100
      health_check:
        interval: 5s
        timeout: 2s
        path: "/health"
    - address: "backend3:3002"
      weight: 50
      health_check:
        interval: 5s
        timeout: 2s
        path: "/health"
  
  # UDP backends (for local testing, use localhost)
  #docker will be udp-backend1:5000, udp-backend2:5001, udp-backend3:5002
  # udp_backends:
  #   - address: "localhost:5001"
  #   - address: "localhost:5002"
  #   - address: "localhost:5003"

  load_balancing:
    algorithm: "round_robin"  # Options: round_robin, weighted_round_robin, least_connections, consistent_hash
    session_affinity: true

  traffic:
    rate_limit:
      requests_per_second: 1000
      burst: 100
    timeout:
      connect: 5s
      idle: 60s
      read: 30s

  circuit_breaker:
    error_threshold: 5
    timeout: 30s

admin:
  api_address: "0.0.0.0:9090"
  metrics_address: "0.0.0.0:9091"

grpc:
  control_plane_address: "data-plane:50051"

